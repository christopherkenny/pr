---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = '#>',
  fig.path = 'man/figures/README-',
  out.width = '100%'
)
```

# pr <img src="man/figures/logo.png" align="right" height="138" alt="" />

<!-- badges: start -->
[![R-CMD-check](https://github.com/christopherkenny/pr/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/christopherkenny/pr/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

`pr` provides a set of probability classes built on `vctrs` and its `rcrd`s class.
The primary offerings include:

- `prob`: A probability vector class
- `prob_mat`: A `rcrd` which describes a matrix of probabilities
- `cnt_prob_mat`: A `rcrd` which describes a matrix of probabilities with counts

It is designed to be lightweight so that it can be included as a dependency for other packages.
Its only direct dependency is `vctrs`.

## Installation

You can install the development version of pr from [GitHub](https://github.com/) with:

``` r
# install.packages("pak")
pak::pak("christopherkenny/pr")
```

## Example

The primary component of the package is the `prob` class.
This represents a vector of probabilities.

```{r prob}
library(pr)
prob(x = c(1 / 2, 0.4, NA, 0.875))
```

It supports creating record classes for sets of probabilities which sum to 1 row-wise.
This is implemented via the `vctrs` `rcrd` type, which is a collection of same-length vectors.

A corresponding probability matrix can be created as follows:

```{r prob-mat}

p1 <- prob(c(0.4, 2 / 3, NA_real_, 1L))
p2 <- 1 - p1
prob_mat(pr_one = p1, pr_two = p2)
```

Finally, a count probability matrix is provided which adds a count field to the probability matrix.

```{r cnt-prob-mat}
p1 <- prob(c(0.4, 2 / 3, NA_real_, 1L))
p2 <- 1 - p1
cnt_prob_mat(pr_one = p1, pr_two = p2, count = c(10, 20, 5, 15))
```

These can also be created without specifying the count, in which case it defaults to 1L.
```{r cnt-prob-mat-default}
p1 <- prob(c(0.4, 2 / 3, NA_real_, 1L))
p2 <- 1 - p1
cnt_prob_mat(pr_one = p1, pr_two = p2)
```

For both matrix types, these are represented as `rcrd` classes which require the columns to be named and each column to be a `prob` vector (or coercible to one).
